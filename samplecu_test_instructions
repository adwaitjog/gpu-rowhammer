Compile using: nvcc -O0 -Xcicc -O0 -Xptxas -O0 -keep -o sample sample.cu (This step generates the sample.ptx file)
nvcc -dryrun -o sample sample.cu --keep 2>script.sh (This step to generate the script.sh file. This would actually not compile anything, but all the steps nvcc follows to compile a .cu file to .ptx, then to an executable is captured in the script)
Open the sample.ptx file. Convert the ld to ld.cv. You can have different versions. One where ld is ld and st is st (nothing changed - base case). Another ld to ld.cv (As per the manual, all accesses should go to DRAM, even if they find the data in L2 - so we expect higher execution times). You can also try st to st.wt (But not sure of this, as a write can be initiated and the processor might not wait for it)
Now we edit the script.sh file to execute those steps that only convert the sample.ptx file to an executable. We need to omit the initial steps where sample.cu is converted to sample.ptx. If you open the script.sh file, you will see a series of commands. Retain all the commands after the line which says "-o sample.ptx" (i.e., uncomment those lines, removing #$ in the beginning). You can identify that line - it starts with ptxas.
Run the script.sh to get convert sample.ptx to an executable.
